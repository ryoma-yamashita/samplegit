<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.jsの環境構築</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="curiculum6-45.css">
  </head>
  <body>
    <h1>Windows版での環境構築</h1>
    <h1>Node.jsとは</h1>
    <p>
      ・・・サーバーサイドで動くJavaScriptの実行環境。PHPやJavaなどと同じような使い方が可能。スマホアプリ開発やIoT開発にも利用することが可能。<br>
      Node.jeを使うことで、フロントエンド（Webサイトの表側の処理のこと、フォームに入力した際にメッセージを出力したり、Webページにアニメーションをつけたりする処理を行う）<br>
      とサーバーサイド（サーバー側で動くプログラムを指し、Webページに必要なデータをデータベースから取得するなどの処理を行う）で使う言語をJavaScriptで統一できるため、プログラマーの負担を減らすことが可能。<br>
      Node.jsは非同期処理ができることメリットの一つ。通常プログラムは、複数のタスクがある場合、上から順番に1つずつ実行していく、<br>
      そのため上のタスクが終了しなけば下のタスクが実行されないためタスクが多くなると処理に時間がかかるようになる。<br>
      非同期処理が可能になると上のタスクを実行中に下のタスクも進めることが可能になり、大量のデータを処理しなければならない場面では非同期処理ができることで表示速度が大きく変わる。<br>
      デメリットとしては、対応しているサーバーが現状少ないことがあげられるが、仮想環境を構築しその中でNode.jsを動かすなどといった手間がかかる程度であり、基本的には受けられるメリットの方が大きい。
    </p>
    <h1>Node.jsをインストールするバージョンで気を付けるポイント</h1>
    <p>
      ・・・Node.jsにはLTS（Long Team Support）という長期の保守運用が約束された安定版と、最新ではあるが、安定性の保証はないが機能追加を盛り込んだ開発版がある。バージョン番号の奇数が開発版、偶数が安定版となっている。<br>
      新しい機能を使用してチャレンジを行う場合は開発版を、実務としての使用に適しているのは安定版である。
    </p>
    <h1>Node Package Managerとは</h1>
    <p>
      ・・・Node.jsのパッケージ（Package）を管理する（Manager）ツール。Node.jsのパッケージ（Package）とは、あらかじめ用意された便利な機能をまとめたもの。
    </p>
    <h1>package.jsonとは</h1>
    <p>
      ・・・Node.jsとJavascriptを使ってアプリを開発する場合に、プロジェクトで使用するパッケージ/モジュールの管理にnpmを用いて管理を行うが、<br>
      この時にアプリが依存するパッケージに関する情報（さらにはプロジェクト全体に関する情報）を記録するのに使用するのがpackage.jsonファイルである。<br>
      このファイルではJSON形式（「JavaScript Object Notation」の略で「Javascriptのオブジェクトの書き方をもとにしたデータ定義方法」のこと。Javascript以外にも、PythonやJava、PHPなどのサーバーサイド言語間のデータやり取りに使用されることが多い）<br>
      で各種の設定を記述していく、この中で必須となる設定は、そのアプリ/モジュールの名称とバージョンを示すname属性とversion属性である。（npmのリポジトリなどを介して、自作のモジュールなどを配布する際には、この2つの属性が識別子となっている）<br>
      次に、プロジェクトの説明となるdescription属性、エントリーポイントを示すmain属性、「npm start」「npm test」などのコマンドの実行時に実際に実行されるコマンドラインを記述するscripts属性、作者を記載するauthor属性、ライセンスを示すlicense属性と続く。<br>
      さらに、「アプリ（モジュール）の実行時に必要なパッケージ」をdependencies属性に、「アプリ（モジュール）の開発時にだけ必要なパッケージ（例えば、アプリのビルド時に使用するトランスパイラ、gulp/Gruntのプラグインなど）」をdevDependencise属性に記述する。
    </p>
    <h1>package-lock.jsonとは</h1>
    <p>
      ・・・package.jsonにはアプリ/プロジェクトが依存するnpmモジュールを記載できるが、依存モジュールが依存するモジュール（＝孫依存モジュール）に関しては何も指定できない。インストールした孫依存モジュールのバージョンを記録しておき、<br>
      孫依存モジュールの新しいバージョンが出たとしても、バージョンを固定しておくためにはpackage-lock.jsonを使用する。<br>
      package.jsonには自分が作成しているアプリ/プロジェクトが直接依存するnpmモジュールが記載される。例えば、自分のアプリ/プロジェクトがaaaとbbbという2つのnpmモジュールに依存しており、それぞれ1.1.1と2.2.2が最新バージョンだったとして、<br>
      「npm install aaa＿＿npm install bbb」とnpm installした場合、package.jsonのdependeciesには「"dependencies": { "aaa": "^1.1.1", "bbb": "^2.2.2"},」と記載される。^（キャレット）はメジャーバージョン（バージョン番号のうち1番左の桁の数字）<br>
      のみを固定するという意味。なので、後になり1.1.2や2.2.3などが新しくリリースされ、リリース後にnpm installすると新しいバージョンがインストールされてしまい、バージョンが固定されず実行環境（devDependencise属性であれば開発環境）が安定されない。<br>
      対して、package-lock.jsonには、npm installした時の依存モジュールのバージョンが^（キャレット）なしで記録される。その後にnpm installする時にはpackage.jsonよりpackage-lock.jsonの情報が優先されてインストールされるため、バージョンが固定できる。<br>
      package.jsonの中に^を使わずにバージョン情報を指定することも可能ではあるが、package.jsonでは依存モジュールが依存しているモジュール（＝孫依存モジュール）のバージョンに関してはコントロールができない。<br>
      例えば、aaaモジュールがcccモジュールに依存している場合、aaaのあるバージョンがcccのどのバージョンを使うは自分自身で決めることができない。aaaモジュールの作成者が決めるものであり、package.jsonの中で指定することはできない。<br>
      しかし、package-lock.jsonを使うことでnpm installでインストールした孫依存モジュールを記録しておくことができ、cccモジュールの新しいバージョンがリリースされたとしても以前のバージョンをインストールすることができる。
    </p>
    <h1>
      npm install パッケージ名を実行する際、気にしなければならないことが3つあります。<br>
      公式ドキュメントで実際にパッケージ名を調べて確認するなどして上げてください。
    </h1>
    <p>
      ・・・「パッケージの脆弱性などの報告があがったものに対して、適切にアップデートが行われ対策をされている」<br>
      「誰でもパッケージを公開できるため、dependency（依存関係）に含まれるパッケージが信頼できるものなのか吟味する必要があるが、膨大なパッケージに依存しているもの高機能なものもあるため、実際には「多くの人に使われている有名なものだから安全なのだろう」と信じて使われているものも多い」<br>
      「READMEファイルの有無。パッケージ内のコードをインストール、構成、および使用するための手順や、ユーザーが役立つと思われるその他の情報が記載されたもの」
    </p>
    <h1>
      今回作業してできたファイルの中で1つGit管理の不要なものがあります。<br>
      それは何か、なぜそれは不要なのか理由も書いてください。
    </h1>
    <p>
      ・・・npmでパッケージ管理を行う場合、ローカルにインストールしたパッケージはプロジェクトの「node_modules」ディレクトリ以下に保存される。必要なパッケージが増加するに従って、このディレクトリの下には多数のファイルが保存されていく<br>
      プロジェクトやパッケージを他者に配布する場合にこうしたファイルまでアーカイブしたり、コピーしたりすると時間や手間が想像以上にかかる。そこで、package-lock.jsonのファイルとpackage.jsonに必要なパッケージをdependencies属性とdevDependecies属性に<br>
      記述しておくことで、プロジェクトを別マシンに移動させたり、他の人に渡したりする際に、「node_modules」ディレクトリ以下のファイルまでコピーする必要がなくなり、プロジェクトのコピー先で<br>
      「npm install」コマンドを実行することにより必要なパッケージがダウンロードされ、環境の復元をすることが可能になる。
    </p>
  </body>
</html>